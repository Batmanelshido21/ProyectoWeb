/**
 * @license
 * Copyright (c) 2014, 2020, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
define(["ojs/ojcore","jquery","ojs/ojcontext","knockout","ojs/ojkeysetimpl","ojs/ojknockouttemplateutils","ojs/ojresponsiveknockoututils","ojs/ojlogger","ojs/ojkoshared","ojs/ojtemplateengine","jqueryui-amd/widget"],(function(e,t,n,r,i,o,a,s,u,l){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n={};return n.value=t.value,n}function p(e,t,n){var r={},i=n.optionMetadata;if(i&&"shouldWrite"===i.writeback){var o=n.option;r[o]=n.value,i.readOnly&&(e.readOnlyProperties[o]=!0)}return r}var f,h,m,g;function v(e,t,n){return"pieCenter"===e&&t.template&&(t._renderer=N(n,t.template)),{pieCenter:t}}function y(e,t,n){return"optionTemplate"===e&&null!==t?{optionRenderer:function(e,t){return function(n){var i=n.parentElement,o=e.createChildContext(n.data,null,(function(e){e.$optionContext=n}));return r.renderTemplate(t,o,null,i),null}}(n,String(t))}:null}function _(e,t){this.Init(e,t)}function b(e,t){var n={};return function(r){var i=r.parentElement,o=e.createChildContext(r.data,null,(function(e){e.$key=r.key,e.$metadata=r.metadata,e.$headerContext=r}));return E(r,t,i,o,n),null}}function C(e,t){var n={};return function(r){var i=r.parentElement,o=e.createChildContext(r.data,null,(function(e){e.$keys=r.keys,e.$metadata=r.metadata,e.$cellContext=r,e.$cell=r.cell}));return E(r,t,i,o,n),null}}function E(e,n,i,o,a){var s=function(e,t){var n=t[e];null==n&&(n=r.utils.parseHtmlFragment(document.getElementById(e).innerHTML,document),t[e]=n);return n.map((function(e){return e.cloneNode(!0)}))}(function(e,t){if("function"==typeof e)return e(t);return e}(n,e),a);r.virtualElements.setDomNodeChildren(i,s),r.applyBindingsToDescendants(o,i);for(var u=0;u<i.childNodes.length;u++)if(1===i.childNodes[u].nodeType){t(i.childNodes[u])._ojDetectCleanData({cleanParent:!0});break}}function A(e,t,n){return"template"===e?{_templateFunction:P(n,t)}:null}function B(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.key,o=r.value;if(null!=i&&null!=o&&t(i.trim(),o.trim()))break}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,n){return function(i){var o=e.createChildContext(i.context);return r.renderTemplate(n,o,{afterRender:function(e){t(e)._ojDetectCleanData()}},i.parentElement),null}}function P(e,n){return function(i){var o=e.createChildContext(i.data);return r.renderTemplate(n,o,{afterRender:function(e){t(e)._ojDetectCleanData()}},i.parentElement),null}}function I(e,t,n){return"tooltip"===e&&t.template&&(t._renderer=N(n,t.template)),{tooltip:t}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
/**
 * @license
 * Knockout Fast Foreach v0.6.0 (2016-07-28T11:02:54.197Z)
 * By: Brian M Hunt (C) 2015 | License: MIT
 *
 * Adds `fastForEach` to `ko.bindingHandlers`.
 *
 * Modification notice: The code is obtained from https://github.com/brianmhunt/knockout-fast-foreach
 * and modified by Oracle JET team to be included into Oracle JET project.
 * @ignore
 */function w(e,n,i){if("item"===e){var o=n.template;return null!=o&&(n.renderer=function(e,n){return function(i){var o=i.parentElement,a=e.createChildContext(i.data,null,(function(e){e.$itemContext=i}));return r.renderTemplate(n,a,{afterRender:function(e){t(e)._ojDetectCleanData()}},o,"replaceNode"),null}}(i,o)),{item:n}}return null}function O(e,t,n){return"center"===e&&t.template&&(t._renderer=N(n,t.template)),{center:t}}function k(e,t,n){return"rootNodeContent"===e&&t.template&&(t._renderer=N(n,t.template)),{rootNodeContent:t}}e.ComponentBinding=function(e,t){this.Init(e,t)},e.Object.createSubclass(e.ComponentBinding,e.Object,"oj.ComponentBinding"),e.ComponentBinding.create=function(t,n){if(null==t)throw new Error("Binding name is required!");for(var i=new e.ComponentBinding(t,n),o=r.bindingHandlers,a=Array.isArray(t)?t:[t],s=0;s<a.length;s++){var u=a[s];e.ComponentBinding._REGISTERED_NAMES.push(u),o[u]=i}return i},e.ComponentBinding.getDefaultInstance=function(){return e.ComponentBinding._INSTANCE},e.ComponentBinding.prototype.setupManagedAttributes=function(e){var t=e.for;t=null==t?"@global":t;var n=this._managedAttrOptions[t]||[];n.push(e),this._managedAttrOptions[t]=n},e.ComponentBinding.deliverChanges=function(){u.getGlobalChangeQueue().deliverChanges()},e.ComponentBinding.prototype.Init=function(t,n){e.ComponentBinding.superclass.Init.call(this),"string"==typeof n&&(n={componentName:n}),this._bindingOptions=n||{},this._bindingNames=Array.isArray(t)?t:[t],this.init=this._init.bind(this),this.update=this._update.bind(this),this._managedAttrOptions={}},e.ComponentBinding.prototype._getBindingOptions=function(){return this._bindingOptions},e.ComponentBinding.prototype._init=function(e,t,n,i,o){return r.applyBindingsToDescendants(o,e),{controlsDescendantBindings:!0}},e.ComponentBinding.prototype._update=function(n,i,o,a,l){var c,p,f=[],h=0,m=t(n);function g(t){f.forEach((function(e){e.dispose()})),f=[],t&&c&&(c("destroy"),c=null),p&&(p.dispose(),p=null),m.off(e.ComponentBinding._HANDLER_NAMESPACE)}function v(t,r,i){if(null!=t){var a=m[t];if("function"==typeof a){a=a.bind(m);p=new _((function(t){var n=e.ComponentBinding.__removeDotNotationOptions(t);a("option",t);for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i];a("option",o,n[o])}}),u.getGlobalChangeQueue());var d=Object.keys(i).filter((function(e){return!(null==e||e===r)})),h={component:a,changeTracker:p,componentName:t,specifiedOptions:d,computeds:f,valueAccessor:function(){return i},allBindingsAccessor:o,bindingContext:l,destroyCallback:function(){c=null},readOnlyProperties:{}};c=this._initComponent(n,h)}else s.error("Component %s is not found",t)}}r.ignoreDependencies((function(){r.computed((function(){var t=r.utils.unwrapObservable(i());"object"!==d(t)&&s.error("ojComponent binding should evaluate to an object");var n,o=this._bindingOptions.componentName,a=!1;if(null==o&&null!=t){for(var u=[e.ComponentBinding._COMPONENT_OPTION,"role"],l=0;!a&&l<u.length;l++)(n=u[l])in t&&(a=!0,o=t[n]);a||s.error("component attribute is required for the ojComponent binding"),o=r.utils.unwrapObservable(o)}0===h?h=1:r.ignoreDependencies(g,this,[!0]),r.ignoreDependencies(v,this,[o,n,t])}),this,{disposeWhenNodeIsRemoved:n})}),this),r.utils.domNodeDisposal.addDisposeCallback(n,g.bind(this,!1))},e.ComponentBinding.prototype._initComponent=function(n,i){var o=!1,a=0,s={},u=t(n),l=i.component,d=i.componentName,c=this;n.addEventListener("_ojDestroy",(function t(r){if(r.target&&r.target===n){i.destroyCallback();var a=c._bindingOptions.beforeDestroy;a&&a(n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),e.ComponentBinding._deliverCreateDestroyEventToManagedProps(!1,s,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),o=!0,i.changeTracker.dispose(),n.removeEventListener("_ojDestroy",t)}}));var p=e.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,i.specifiedOptions,d),f=e.ComponentBinding.getDefaultInstance();if(this!==f){var h=f._getManagedAttributes(i.specifiedOptions,d);e.CollectionUtils.copyInto(h,p),p=h}for(var m={},g=function(){var t=this._property,r=e.ComponentBinding._toJS(i.valueAccessor()[t]);if(0===a){var u=p[t];if(null!=u){s[t]=u;var d=u.init;if(null!=d)for(var c=d(t,r,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext)||{},f=Object.keys(c),h=0;h<f.length;h++){var g=f[h];m[g]=e.ComponentBinding.__cloneIfArray(c[g])}}else m[t]=e.ComponentBinding.__cloneIfArray(r)}else if(!o)if(null!=p[t]){var v=p[t].update;if(null!=v)for(var y=v(t,r,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext)||{},_=Object.keys(y),b=0;b<_.length;b++){var C=_[b];i.changeTracker.addChange(C,e.ComponentBinding.__cloneIfArray(y[C]))}}else i.readOnlyProperties[t]||i.changeTracker.addChange(t,e.ComponentBinding.__cloneIfArray(r))},v=0;v<i.specifiedOptions.length;v++)i.computeds.push(r.computed(g,{_property:i.specifiedOptions[v]}));a=1,e.ComponentBinding._registerWritebacks(u,i);var y=e.ComponentBinding.__removeDotNotationOptions(m);l(m),Object.keys(y).forEach((function(e){l("option",e,y[e])}));var _=this._bindingOptions.afterCreate;return _&&_(n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),e.ComponentBinding._deliverCreateDestroyEventToManagedProps(!0,s,n,l,i.valueAccessor,i.allBindingsAccessor,i.bindingContext),m=null,l},e.ComponentBinding.prototype._getManagedAttributes=function(t,n){return e.ComponentBinding._resolveManagedAttributes(this._managedAttrOptions,t,n)},e.ComponentBinding._resolveManagedAttributes=function(e,n,r){var i={},o=[],a=function t(n,r){var i=e[n];if(null!=i)for(var a=i.length-1;a>=0;a--){var s=i[a];if(null!=s.attributes&&o.push(s),r){var u=s.use;if(null!=u){u=Array.isArray(u)?u:[u];for(var l=0;l<u.length;l++)t(u[l],!0)}}}};a(r,!0);var s=t.oj[r];if(null!=s)for(var u=Object.getPrototypeOf(s.prototype);null!=u&&"oj"===u.namespace;)a(u.widgetName,!0),u=Object.getPrototypeOf(u);if(a("@global",!1),o.length>0)for(var l=0;l<n.length;l++)for(var d=n[l],c=0;c<o.length;c++){var p=o[c];if(p.attributes.indexOf(d)>=0){i[d]={init:p.init,update:p.update,afterCreate:p.afterCreate,beforeDestroy:p.beforeDestroy};break}}return i},e.ComponentBinding._HANDLER_NAMESPACE=".oj_ko",e.ComponentBinding._registerWritebacks=function(t,n){for(var r={"^slider$":[{event:"slidechange",getter:c}],"^oj*":[{event:"ojoptionchange",getter:p.bind(void 0,n)}]},i={},o=Object.keys(r),a=0;a<o.length;a++){var s=o[a];if(n.componentName.match(s)){for(var u=r[s],l=0;l<u.length;l++){var d=u[l];t.on(d.event+e.ComponentBinding._HANDLER_NAMESPACE,{getter:d.getter},(function(r,o){if(r.target===t[0])for(var a=r.data.getter(r,o),s=n.valueAccessor(),u=Object.keys(a),l=0;l<u.length;l++){var d=u[l];n.changeTracker.suspend(d);try{if(n.specifiedOptions.indexOf(d)>=0){var c=s[e.ComponentBinding._OPTION_MAP],p=null==c?null:c[d],f=s[d];e.ComponentBinding._writeValueToProperty(d,f,a[d],p,n.bindingContext,i)}}finally{n.changeTracker.resume(d)}}}))}break}}},e.ComponentBinding._writeValueToProperty=function(t,n,i,o,a,s){if(null!=n&&r.isObservable(n))r.isWriteableObservable(n)&&n(e.ComponentBinding.__cloneIfArray(i));else{if(!(t in s)){var l=null,d=e.__ExpressionUtils.getPropertyWriterExpression(o);null!=d&&(l=u.createEvaluator(d,a)),s[t]=l}var c=s[t];if(c)e.__ExpressionUtils.getWriter(c(a))(e.ComponentBinding.__cloneIfArray(i))}},e.ComponentBinding._toJS=function(t){var n=r.utils.unwrapObservable(t);return(Array.isArray(n)||e.CollectionUtils.isPlainObject(n))&&n.ojConvertToJS&&(n=r.toJS(n)),n},e.ComponentBinding.__cloneIfArray=function(e){return Array.isArray(e)&&(e=e.slice()),e},e.ComponentBinding.__removeDotNotationOptions=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];i.indexOf(".")>=0&&(t[i]=e[i],delete e[i])}return t},e.ComponentBinding._deliverCreateDestroyEventToManagedProps=function(e,t,n,r,i,o,a){for(var s=Object.keys(t),u=0;u<s.length;u++){var l=s[u],d=t[l],c=e?d.afterCreate:d.beforeDestroy;c&&c(l,n,r,i,o,a)}},e.ComponentBinding.__getKnockoutVersion=function(){return e.__isAmdLoaderPresent()&&r?r.version:""},e.ComponentBinding._isNameRegistered=function(t){return e.ComponentBinding._REGISTERED_NAMES.indexOf(t)>=0},e.ComponentBinding._REGISTERED_NAMES=[],e.ComponentBinding._COMPONENT_OPTION="component",e.ComponentBinding._OPTION_MAP="_ojOptions",f="cleanExternalData",h=r.utils.domNodeDisposal,m=h[f],h[f]=function(t){var n=e.DomUtils?e.DomUtils.setInKoCleanExternal:null;n&&n(t);try{m(t)}finally{n&&n(null)}},e.ComponentBinding._INSTANCE=e.ComponentBinding.create(["ojComponent","jqueryUI"]),t.widget("oj._ojDetectCleanData",{options:{cleanParent:!1},_destroy:function(){var e=r.utils.domNodeDisposal,t=e.cleanExternalData;e.cleanExternalData=function(){};try{this.options.cleanParent&&null!=this.element[0].parentNode?r.cleanNode(this.element[0].parentNode):r.cleanNode(this.element[0])}finally{e.cleanExternalData=t}}}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["pieCenter"],init:function(e,t,n,r,i,o,a){return v(e,t,a)},update:function(e,t,n,r,i,o,a){return v(e,t,a)},for:"ojChart"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["optionTemplate"],init:function(e,t,n,r,i,o,a){var s=y(e,t,a);if(null!==s)return s},update:function(e,t,n,r,i,o,a){return y(e,t,a)},for:"ComboboxOptionRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojCombobox",use:"ComboboxOptionRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojSelect",use:"ComboboxOptionRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojInputSearch",use:"ComboboxOptionRenderer"}),e.Object.createSubclass(_,e.Object,"ComponentBinding.ComponentChangeTracker"),_.prototype.Init=function(e,t){_.superclass.Init.call(this),this._updateCallback=e,this._queue=t,this._changes={},this._suspendCountMap={}},_.prototype.addChange=function(e,t){this._isSuspended(e)||this._disposed||(this._changes[e]=t,this._queue.registerComponentChanges(this))},_.prototype.dispose=function(){this._disposed=!0},_.prototype.resume=function(e){var t=this._suspendCountMap[e]||0;(t-=1)<0?s.error("ComponentChangeTracker suspendCount underflow"):0===t?delete this._suspendCountMap[e]:this._suspendCountMap[e]=t},_.prototype.suspend=function(e){var t=this._suspendCountMap[e]||0;this._suspendCountMap[e]=t+1},_.prototype.applyChanges=function(e){this._disposed||this._updateCallback(e)},_.prototype.flushChanges=function(){var e=this._changes;return this._changes={},e},_.prototype._isSuspended=function(e){return(this._suspendCountMap[e]||0)>=1},r.bindingHandlers.ojContextMenu={update:function(n,i,o,a,s){var u,l,d=t(n),c=!1,p=!1,f=null;d.off(".ojContextMenu").removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",y,!0),d[0].removeEventListener("touchstart",B,{passive:!1}),clearTimeout(u);var h=d.data("_ojLastContextMenu");h&&E(h.selector,h.id).off(".ojContextMenu");var m=!1,g=r.utils.unwrapObservable(i()),v=t.isPlainObject(g)?n.getAttribute("contextmenu"):null;function y(e){if(c)return e.preventDefault(),e.stopPropagation(),c=!1,!1}function _(e){121===e.which&&e.shiftKey&&C().is(":visible")&&e.preventDefault()}function b(){var t=e.Components.__GetWidgetConstructor(C()[0],"ojMenu"),n=t&&t("instance");if(!n)throw new Error('ojContextMenu binding bound to "'+(v||g)+'", which does not reference a valid JET Menu.');return m||(n.widget().on("ojclose.ojContextMenu",(function(){document.removeEventListener("keyup",_)})),m=!0),n}function C(){return E(g,v)}function E(e,n){return n?t(document.getElementById(n)):t(e).first()}function A(e,t,n){c=n;var r=b();if(c&&d.one("touchend.ojContextMenu",(function(){r.__contextMenuPressHoldJustEnded(!0),setTimeout((function(){r.__contextMenuPressHoldJustEnded(!1)}),50)})),"touchstart"===f&&"contextmenu"===e.type||"contextmenu"===f&&"touchstart"===e.type)return f=null,void clearTimeout(l);if(!e.isDefaultPrevented()){var i={launcher:d,initialFocus:"menu",position:{mouse:{my:"start top",at:"start bottom",of:e},touch:{my:"start>40 center",at:"start bottom",of:e,collision:"flipfit"},keyboard:{my:"start top",at:"start bottom",of:"launcher"}}[t]};r.__openingContextMenu=!0,r.open(e,i),r.__openingContextMenu=!1,r.widget().is(":visible")&&(e.preventDefault(),document.addEventListener("keyup",_),"touchstart"!==e.type&&"contextmenu"!==e.type||(f=e.type,l=setTimeout((function(){f=null}),300)))}}function B(e){if("touchstart"===e.type&&(e=t.Event(e)),"mousedown"!==e.type||!b().__contextMenuPressHoldJustEnded())return c=!1,"touchstart"===e.type&&(p=!0,u=setTimeout(A.bind(void 0,e,"touch",!0),750)),!0}d.data("_ojLastContextMenu",{selector:g,id:v}),n.addEventListener("click",y,!0),d[0].addEventListener("touchstart",B,{passive:!1}),d.on("mousedown.ojContextMenu keydown.ojContextMenu ",B).on("touchend.ojContextMenu touchcancel.ojContextMenu",(function(){return p=!1,clearTimeout(u),!0})).on("keydown.ojContextMenu contextmenu.ojContextMenu",(function(e){("contextmenu"===e.type||121===e.which&&e.shiftKey)&&A(e,p?"touch":"keydown"===e.type?"keyboard":"mouse",!1);return!0})).addClass(e.DomUtils.isTouchSupported()?"oj-menu-context-menu-launcher":"")}},e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["header","cell"],init:function(e,t,n,r,i,o,a){if("header"===e){var s=t.row;if(null!=s){var u=s.template;null!=u&&(s.renderer=b(a,u))}var l=t.column;if(null!=l){var d=l.template;null!=d&&(l.renderer=b(a,d))}var c=t.rowEnd;if(null!=c){var p=c.template;null!=p&&(c.renderer=b(a,p))}var f=t.columnEnd;if(null!=f){var h=f.template;null!=h&&(f.renderer=b(a,h))}return{header:t}}if("cell"===e){var m=t.template;return null!=m&&(t.renderer=C(a,m)),{cell:t}}},update:function(e,t,n,r,i,o,a){if("header"===e){var s=t.row;if(null!=s){var u=s.template;null!=u&&(s.renderer=b(a,u))}var l=t.column;if(null!=l){var d=l.template;null!=d&&(l.renderer=b(a,d))}var c=t.rowEnd;if(null!=c){var p=c.template;null!=p&&(c.renderer=b(a,p))}var f=t.columnEnd;if(null!=f){var h=f.template;null!=h&&(f.renderer=b(a,h))}return{header:t}}if("cell"===e){var m=t.template;return null!=m&&(t.renderer=C(a,m)),{cell:t}}return null},for:"ojDataGrid"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["template"],init:function(e,t,n,r,i,o,a){return A(e,t,a)},update:function(e,t,n,r,i,o,a){return A(e,t,a)},for:"ojDiagram"}),g=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e.__ExpressionUtils={},e.__ExpressionUtils.getPropertyWriterExpression=function(e){if(null==e||["true","false","null","undefined"].indexOf(e)>=0)return null;var t=(e=e.trim()).match(g);return null===t?null:"{_ko_property_writers: function(v){"+(t[1]?"Object("+t[1]+")"+t[2]:e)+"=v;}}"},e.__ExpressionUtils.getWriter=function(e){return e._ko_property_writers},e.KnockoutTemplateUtils=o,e.ResponsiveKnockoutUtils=a,u.addPostprocessor({getBindingAccessors:function(t,n,i,o){if(null==i)return null;var a=function(t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];if(e.ComponentBinding._isNameRegistered(i))return i}return null}(i);null!=a&&(i=function(t,n,i,o,a){var s=function(e,t,n,i){var o=null,a=u.getBindingsString(e,n,i),s=r.jsonExpressionRewriting.parseObjectLiteral(a),l=null;B(s,(function(e,n){return e===t&&(l=n,!0)})),null!=l&&0===l.indexOf("{")&&(o=r.jsonExpressionRewriting.parseObjectLiteral(l));return{attrList:o,bindingExpr:l}}(t,n,i,o),l=s.attrList;if(null==l)return a;var d={};return B(l,(function(e,t){d[e]=t})),(a=e.CollectionUtils.copyInto({},a))[n]=function(t,n,r){var i=function(){var r={};return Object.keys(n).forEach((function(e){var i=n[e],o=u.createEvaluator(i,t).bind(null,t);Object.defineProperty(r,e,{get:o,enumerable:!0})})),Object.defineProperty(r,e.ComponentBinding._OPTION_MAP,{value:n}),r};return i.toString=function(){return r},i}(o,d,s.bindingExpr),a}(t,a,o,n,i));return i}}),u.addPostprocessor({nodeHasBindings:function(t,n){return e.BaseCustomElementBridge?n||1===t.nodeType&&e.BaseCustomElementBridge.getRegistered(t.nodeName):n},getBindingAccessors:function(t,n,r){if(1===t.nodeType&&e.BaseCustomElementBridge){var i=t.nodeName,o=e.BaseCustomElementBridge.getRegistered(i);o&&((r=r||{})._ojCustomElement=function(){return{composite:o.composite}})}return r}}),function(){r.bindingHandlers._ojCustomElement={after:["attr"],init:function(o,a,s,u,l){var d,c,p=e.BaseCustomElementBridge.getInstance(o),f=e.BaseCustomElementBridge.getProperties(p)||{},h=function(t,o){var a=Object.create(null),s=Object.create(null),u=Object.create(null),l=function(e,t){var r=e.localName,o=n[r];if(void 0!==o)return o;return o=null,Object.keys(t).forEach((function(e){var n=t[e],r=i(n,["binding","provide"]),a=i(n,["binding","consume"]);if(r||a){if(n.properties)throw new Error("Propagating complex properties is not supported!");(o=o||Object.create(null))[e]=[r,a]}})),n[r]=o,o}(t,o);if(null!==l){Object.keys(l).forEach((function(n){var i,d=D(l[n],2),c=d[0],p=d[1];if(void 0!==c){var f=e.__AttributeUtils.propertyNameToAttribute(n),h=t.hasAttribute(f),m=[],g=[];if(c.forEach((function(e){var t=e.name;if(void 0===t)throw new Error("name attribute for the binding/provide metadata is required!");var n=e.default,i=function(e,t){var n=r.observable(t);if(e)return r.pureComputed({write:function(t){return n(e.hasOwnProperty(t)?e[t]:t)},read:function(){return n()}});return n}(e.transform,n);m.push(i),g.push({name:t,obs:i})})),g.length>0){var v=function(e){return function(t){return e.forEach((function(e){return e(t)}))}}(m);a[n]={set:v,vars:g};var y=(i=v,function(e){return i(e.detail.value)}),_=n+"Changed";if(t.addEventListener(_,y),u[_]=y,h){var b=t.getAttribute(f);e.__AttributeUtils.getExpressionInfo(b).expr||v(e.__AttributeUtils.coerceValue(t,f,b,o[n].type))}}}if(void 0!==p){var C=p.name;if(void 0===C)throw new Error("'name' property on the binding/consume metadata is required!");s[n]=C}}))}return{provide:a,consume:s,cleanup:function(){Object.keys(u).forEach((function(e){return t.removeEventListener(e,u[e])}))}}}(o,f),m=h.provide,g=h.consume,v=h.cleanup;function y(){d&&(d.teardown(),d=null),c&&(o.removeEventListener(t,c),c=null),e._KnockoutBindingProvider.getInstance().__NotifyBindingsDisposed(o)}r.computed((function(){var n=a().composite,i=r.computedContext.isInitial();i||y(),function(n,r){d=new e.__ExpressionPropertyUpdater(o,l,n);var i={_domListener:!0};p.__INITIALIZING_PROPS=!0;for(var a=o.attributes,s=0;s<a.length;s++){var u=a[s],h=e.__AttributeUtils.attributeToPropertyName(u.nodeName),v=void 0,y=void 0,_=e.__AttributeUtils.eventListenerPropertyToEventType(h)&&!f[h];if(!_){y=h.split(".")[0];var b=m[y];v=r&&b?b.set:void 0}d.setupPropertyBinding(u.value,h,_?i:f[y],v)}Object.keys(g).forEach((function(t){if(!o.hasAttribute(e.__AttributeUtils.propertyNameToAttribute(t))){var n=m[t],i=r&&n?n.set:void 0;d.setupPropertyBinding(void 0,t,f[t],i,g[t])}})),p.__INITIALIZING_PROPS=!1,c=function(t){var n=t.detail,r=n.attribute,o=e.__AttributeUtils.attributeToPropertyName(r),a=e.__AttributeUtils.eventListenerPropertyToEventType(o)&&!f[o]?i:f[o.split(".")[0]];d.setupPropertyBinding(n.value,o,a,void 0,g[o])},o.addEventListener(t,c)}(n,i),p.playbackEarlyPropertySets(o)}),null,{disposeWhenNodeIsRemoved:o}),r.utils.domNodeDisposal.addDisposeCallback(o,(function(){y(),v()}));var _=function(e,t){var n=e,r=Object.keys(t);if(r.length>0){var i=e.$provided,o=void 0===i?{}:Object.assign({},i);r.forEach((function(e){t[e].vars.forEach((function(e){o[e.name]=e.obs}))})),n=e.extend({$provided:o})}return n}(l,m);return r.applyBindingsToDescendants(_,o),e._KnockoutBindingProvider.getInstance().__NotifyBindingsApplied(o),{controlsDescendantBindings:!0}}};var t="attribute-changed",n=Object.create(null);function i(e,t){var n=e;return t.some((function(e){return null==(n=n[e])}))?void 0:n}}(),e.__ExpressionPropertyUpdater=function(t,n,i){var o=function(){if(i)return null;return new _((function(e){for(var n=Object.keys(e),r=0;r<n.length;r++){m(n[r])}try{t.setProperties(e)}finally{for(var i=0;i<n.length;i++){g(n[i])}}}),u.getGlobalChangeQueue())}(),a={},l={},c={},p={};function f(e){return e.$current||e.$data}function h(n,r,i){var o=a[r];if(o||(o=function(e){var t,n=f(e),r=function(r){t&&t(r,n,e)};return r.setListener=function(e){t=e},r}(n),a[r]=o,t.addEventListener(r,o)),null==i||i instanceof Function)o.setListener(i);else{var s=e.__AttributeUtils.eventTypeToEventListenerProperty(r),u=e.__AttributeUtils.propertyNameToAttribute(s),l="Invalid type '"+d(i)+"' found for attribute '"+u+"'. Expected value of type 'function'.";if(!e.BaseCustomElementBridge||!e.BaseCustomElementBridge.getRegistered(t.tagName)){var c=t.tagName.toLowerCase()+" with id '"+t.id+"'";throw new Error(c+": "+l)}e.BaseCustomElementBridge.getInstance(t).throwError(t,l)}}function m(e){var t=p[e]||0;t+=1,p[e]=t}function g(e){var t=p[e];t?(t-=1,p[e]=0===t?null:t):s.error("Property count undefrlow")}this.setupPropertyBinding=function(i,a,d,v,y){if(d&&function(e,t){var n=e.split("."),r=t;n.shift();for(var i=0;i<n.length&&(r=r.properties);i++)r=r[n[i]];return r}(a,d)){var _=l[a];_&&(_.dispose(),l[a]=null);var b,C,E,A=c[a];if(A&&(t.removeEventListener(a+"Changed",A),c[a]=null),d._domListener){var B=e.__AttributeUtils.eventListenerPropertyToEventType(a);h(n,B,null)}if(void 0===i){var D=void 0===y?null:(n.$provided||{})[y];D&&(b=function(){return D()})}else{var x=e.__AttributeUtils.getExpressionInfo(i);(C=x.expr)&&(b=u.createEvaluator(C,n),E=x.downstreamOnly)}if(b){if(!d.readOnly){var j=!0;r.ignoreDependencies((function(){l[a]=r.computed((function(){var i,s,u,l=b(n),c=r.utils.unwrapObservable(l);if(d._domListener){var p=e.__AttributeUtils.eventListenerPropertyToEventType(a);h(n,p,c)}else Array.isArray(c)&&(c=c.slice()),d._eventListener&&c&&c instanceof Function&&(s=c,u=f(i=n),c=function(e){s(e,u,i)}),!j&&o?o.addChange(a,c):function(e,n){m(e);try{t.setProperty(e,n)}finally{g(e)}}(a,c),j&&v&&v(c)}))})),j=!1}void 0!==C&&d.writeback&&!E&&(c[a]=function(i,o,a){var l=i.split("."),d=l[0],c=function(t){if(!function(e){return p[e]}(d)){var c,f=!1;r.ignoreDependencies((function(){for(var i=t.detail.value,s=1;s<l.length;s++){i=i[l[s]]}var d=a(n);if(r.isObservable(d))r.isWriteableObservable(d)?(d(e.ComponentBinding.__cloneIfArray(i)),f=!0):c="the observable is not writeable";else{var p=e.__ExpressionUtils.getPropertyWriterExpression(o);if(null!=p){var h=u.createEvaluator(p,n);e.__ExpressionUtils.getWriter(h(n))(e.ComponentBinding.__cloneIfArray(i)),f=!0}else c="the expression is not a valid update target"}})),f||c&&s.info("The expression '%s' for property '%s' was not updated because %s.",o,i,c)}};return t.addEventListener(d+"Changed",c),c}(a,C,b))}}},this.teardown=function(){var e,n=Object.keys(l);for(e=0;e<n.length;e++){var r=l[n[e]];r&&r.dispose()}for(l={},n=Object.keys(c),e=0;e<n.length;e++){var i=n[e].split(".")[0];t.removeEventListener(i+"Changed",c[i])}for(c={},n=Object.keys(a),e=0;e<n.length;e++){var s=n[e];t.removeEventListener(s,a[s])}a={},o&&o.dispose()}},function(){function t(e,t,r,o){var a=i(e.getAttribute(r),o);if(a)return n(e,t,"ko "+t+":"+a)}function n(e,t,n){for(var r=e.tagName.toLowerCase(),i=r,o=e.attributes,a=0;a<o.length;a++){var s=o[a];i+=" ",i+=s.name,i+="='",i+=s.value,i+="'"}var u=e.parentNode,l=document.createComment(i),d=document.createComment("/"+r);u.insertBefore(l,e);var c=document.createComment(n),p=document.createComment("/ko");u.insertBefore(c,e);var f,h=[l,c];if("if"===t)for(;e.childNodes.length>0;)f=e.childNodes[0],u.insertBefore(f,e),h.push(f);else if("_ojBindForEach_"===t)for(;e.childNodes.length>0;)f=e.childNodes[0],u.insertBefore(f,e),h.push(f);return u.insertBefore(p,e),h.push(p),u.replaceChild(d,e),h.push(d),h}function i(t,n){if(null!=t){var r=e.__AttributeUtils.getExpressionInfo(t).expr;return null==r&&(r=n?"'"+t+"'":t),r}return null}function o(t,n,i,o,a){var s,l,d,c=e.__AttributeUtils.getExpressionInfo(o).expr;if(null==c)l=e.__AttributeUtils.coerceValue(i,"class",o,"any"),d=Array.isArray(l),s=function(){return d?l.join(" "):l};else{var p=(s=u.createEvaluator(c,a).bind(null,a))();"function"==typeof p?(l=p(),(d=Array.isArray(l))&&(s=r.pureComputed((function(){return p().join(" ")})))):(l=p,(d=Array.isArray(l))&&(s=function(){return l.join(" ")}))}"string"==typeof l||d?n.class=s:t.css=s}function a(t,n,r,i,o){var a=e.__AttributeUtils.getExpressionInfo(r).expr;return null==a?function(){return"object"===o?e.__AttributeUtils.coerceValue(t,n,r,o):r}:u.createEvaluator(a,i).bind(null,i)}function s(e){return function(){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t[i]=e[i]()}return t}}function l(t){if(1!==t.nodeType)return{};if(!t._ojbindingsobj){for(var n=!!e.BaseCustomElementBridge&&!!e.BaseCustomElementBridge.getRegistered(t.nodeName),r={},i=[],o=[],a=[],s=t.attributes,u=0;u<s.length;u++){var l=s[u],c=d(l.name);c&&("style"===c?r._STYLE_BIND=c:"style."===c.substring(0,6)?o.push(c):i.push(c)),n||"on-"!==l.name.substring(0,3)||a.push(l)}if(o.length){if(r._STYLE_BIND)throw new Error("Cannot have both style and style.* data bound attributes on "+t.tagName+" with id "+t.id);r._STYLE_BIND=o}i.length&&(r._ATTR_BIND=i),a.length&&(r._EVENT_BIND=a),Object.defineProperty(t,"_ojbindingsobj",{value:r})}return t._ojbindingsobj}function d(e){return e&&":"===e.charAt(0)?e.slice(1):null}function c(e){return":"+e}u.registerPreprocessor("oj-bind-text",(function(e){return t(e,"text","value",!0)})),u.registerPreprocessor("oj-bind-if",(function(e){return t(e,"if","test",!1)})),u.registerPreprocessor("oj-bind-for-each",(function(t){var r=t.getAttribute("data"),o=e.__AttributeUtils.getExpressionInfo(r).expr;if(!o)try{var a=JSON.parse(r);if(!Array.isArray(a))throw new Error("got value "+r);o=r}catch(e){throw new Error("The value on the oj-bind-for-each data attribute should be either a JSON array or an expression : "+e)}var s=i(t.getAttribute("as"),!0);if(!o)return;var u="ko _ojBindForEach_:{data:"+o;return n(t,"_ojBindForEach_",u+=s?",as:"+s+"}":"}")})),u.addPostprocessor({nodeHasBindings:function(e,t){var n=l(e);return t||null!=n._ATTR_BIND||null!=n._STYLE_BIND||null!=n._EVENT_BIND},getBindingAccessors:function(t,n,i){if(1===t.nodeType){i=i||{};var u,d,p=l(t),f=p._STYLE_BIND;if(f){if(i.style)throw new Error("Cannot have both style data-bind and JET style binding on "+t.tagName+" with id "+t.id);if("style"===f)i[f]=a(t,f,t.getAttribute(c(f)),n,"object");else{var h={};for(u=0;u<f.length;u++){d=f[u],h[e.__AttributeUtils.attributeToPropertyName(d.substring(6))]=a(t,d,t.getAttribute(c(d)),n,"string")}i.style=s(h)}}var m=p._ATTR_BIND;if(m){if(i.attr)throw new Error("Cannot have both attr data-bind and JET attribute binding on "+t.tagName+" with id "+t.id);var g={};for(u=0;u<m.length;u++)"class"===(d=m[u])?o(i,g,t,t.getAttribute(c(d)),n):g[d]=a(t,d,t.getAttribute(c(d)),n,"string");i.attr=s(g)}var v=p._EVENT_BIND;if(v){var y=new e.__ExpressionPropertyUpdater(t,n,!0);for(u=0;u<v.length;u++){var _=v[u],b=e.__AttributeUtils.attributeToPropertyName(_.nodeName);y.setupPropertyBinding(_.value,b,{_domListener:!0})}r.utils.domNodeDisposal.addDisposeCallback(t,(function(){y&&(y.teardown(),y=null)}))}}return i}})}(),e._KnockoutBindingProvider=function(){this._resolveWhenChildrenBindingsApplied=function(t,n){var r=this._getChildrenBindingsAppliedPromises(t);if("none"===n||0===r.length)e.BaseCustomElementBridge.getInstance(t).resolveBindingProvider(this);else{for(var i=[];r.length>0;){var o=r.shift();("nearestCustomElement"===n||"immediate"===n&&!0===o.immediate)&&i.push(o.promiseCallback)}Promise.all(i).then(function(){this._resolveWhenChildrenBindingsApplied(t,n)}.bind(this))}},this._getChildrenBindingsAppliedPromises=function(e,t){return!e._whenChildrenBindingsApplied&&t&&Object.defineProperty(e,"_whenChildrenBindingsApplied",{value:[],enumerable:!1}),e._whenChildrenBindingsApplied||[]},this.__RegisterBindingAppliedPromiseForChildren=function(e,t){var n=null;if(e){var r=new Promise((function(e){n=e}));this._getChildrenBindingsAppliedPromises(e,!0),e._whenChildrenBindingsApplied.push({immediate:t,promiseCallback:r})}return n},this.__NotifyBindingsApplied=function(t){var n=e.BaseCustomElementBridge.getTrackChildrenOption(t);this._resolveWhenChildrenBindingsApplied(t,n)},this.__NotifyBindingsDisposed=function(t){e.BaseCustomElementBridge.getInstance(t).disposeBindingProvider(t)},this.__GetThrottlePromise=function(){return u.getGlobalChangeQueue().getThrottlePromise()}},e._KnockoutBindingProvider.getInstance=function(){return e._KnockoutBindingProvider._instance},e._KnockoutBindingProvider._instance=new e._KnockoutBindingProvider,e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["tooltip"],init:function(e,t,n,r,i,o,a){return I(e,t,a)},update:function(e,t,n,r,i,o,a){return I(e,t,a)},for:"tooltipOptionRenderer"}),function(){for(var t=["ojChart","ojDiagram","ojNBox","ojPictoChart","ojSunburst","ojTagCloud","ojThematicMap","ojTreemap","ojDialGauge","ojLedGauge","ojRatingGauge","ojSparkChart","ojStatusMeterGauge","ojGantt"],n=0;n<t.length;n++)e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:t[n],use:"tooltipOptionRenderer"})}(),function(){var t=document&&"function"==typeof document.createDocumentFragment;function o(e,t,n){return{status:"added",value:e,index:t,key:n}}function a(e){return{status:"deleted",value:{},index:e}}function u(e,t){var n;if(e){var r=e.length;n=new Array(r);for(var i=0;i<r;i++)n[i]=t(e[i],i,e)}return n}function c(e,t,n){this.element=t.element||e,r.applyBindingsToDescendants(n,this.element),this.element._templateNode=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];if(1===r.nodeType&&"template"===r.nodeName.toLowerCase()){if(t)throw new Error("Multiple templates found: oj-bind-for-each requires a single template element as its direct child");t=r}}if(!t)throw new Error("Template not found: oj-bind-for-each requires a single template element as its direct child");return t}(r.virtualElements.childNodes(this.element)),this.element._templateNode.__ojBindingContext=r.contextFor(this.element._templateNode),this.data=t.data,this.as=t.as,this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],this.headDataPromise=null,this.tailDataPromise=null,r.virtualElements.emptyNode(this.element),this._initChildrenBindingsAppliedPromise();var i=r.unwrap(this.data);i.fetchFirst?(this.currentDataProvider=i,this.fetchData()):this.onArrayChange(u(i,o)),this.addSubscriptions()}c.PENDING_DELETE_INDEX_KEY="_ko_ffe_pending_delete_index",c.prototype.addSubscriptions=function(){var e=r.isObservable(this.data);this.currentDataProvider?(this.dataMutateHandler=this.handleDataMutateEvent.bind(this),this.dataRefreshHandler=this.handleDataRefreshEvent.bind(this),this.currentDataProvider.addEventListener("mutate",this.dataMutateHandler),this.currentDataProvider.addEventListener("refresh",this.dataRefreshHandler),e&&(this.changeSubs=this.data.subscribe(this.onDataChange,this,"change"))):e&&(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeArraySubs=this.data.subscribe(this.onArrayDataChange,this,"arrayChange"),this.changeSubs=this.data.subscribe(this.onDataChange,this,"change"))},c.prototype.removeSubscriptions=function(){this.changeSubs&&this.changeSubs.dispose(),this.changeArraySubs&&this.changeArraySubs.dispose(),this.currentDataProvider&&(this.currentDataProvider.removeEventListener("mutate",this.dataMutateHandler),this.currentDataProvider.removeEventListener("refresh",this.dataRefreshHandler))},c.prototype.onArrayDataChange=function(e){this.arrayChangeSet=e},c.prototype.onDataChange=function(e){this.arrayChangeSet?(this.onArrayChange(this.arrayChangeSet),this.arrayChangeSet=null):(this.setData({data:this.data,dataProvider:e.fetchFirst?e:null}),this.recreateContent(e))},c.prototype.recreateContent=function(e){this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],r.virtualElements.emptyNode(this.element),e.fetchFirst?this.fetchData():this.onArrayChange(u(e,o))},c.prototype.registerBusyState=function(){var e=this.element.parentNode;return n.getContext(e).getBusyContext().addBusyState({description:"oj-bind-for-each binding on a node with the Id "+e.id+"is loading data."})},c.prototype._initChildrenBindingsAppliedPromise=function(){var t=this.element._templateNode.__ojBindingContext.$current,n=t?{_nearestCustomParent:t._nearestCustomParent,_immediate:t._immediate}:null,r=function(t,n){for(var r=t.parentNode;r&&!e.ElementUtils.isValidCustomElementName(r.localName);)r=r.parentNode;return r||(r=n?n._nearestCustomParent:null),r}(this.element,n),i=function(e,t,n){var r=!1,i=!!n;return e.parentNode===t?r=!0:i&&!e.parentNode.parentNode&&(r=n._immediate),r}(this.element,r,n);this.trackingContext={_nearestCustomParent:r,_immediate:i},this._childrenBindingsPromiseResolver=e._KnockoutBindingProvider.getInstance().__RegisterBindingAppliedPromiseForChildren(r,i)},c.prototype._resolveChildrenBindingsAppliedPromise=function(){this._childrenBindingsPromiseResolver&&(this._childrenBindingsPromiseResolver(),this._childrenBindingsPromiseResolver=null)},c.prototype.resetChainIfCompleted=function(e){e===this.tailDataPromise&&(this.headDataPromise=null,this.tailDataPromise=null)},c.prototype.promiseRejectHelper=function(e,t,n){if(t(),this.resetChainIfCompleted(n),!e._CAUGHT_PROMISE_REJECTION&&"oj-bind-for-each: abandoned promise"!==e.message){if(e instanceof Error)throw e._CAUGHT_PROMISE_REJECTION=!0,e;throw new Error(e)}s.info(e)},c.prototype.fetchData=function(){var e,t,n,r=this.registerBusyState(),i=this.currentDataProvider.fetchFirst({size:-1})[Symbol.asyncIterator]();(n=new Promise(function(a,s){e=a,t=s,i.next().then(function a(s,u,l){return function(d){if(l.headDataPromise===n){for(var c=d.value,p=s.length,f=0;f<c.metadata.length&&f<c.data.length;f++)s.push(o(c.data[f],p,c.metadata[f].key)),p+=1;d.done?(u.call(l,s),r(),e(),l.resetChainIfCompleted(n)):i.next().then(a(s,u,l),(function(e){r(),t(e),l.resetChainIfCompleted(n)}))}else r(),t(new Error("oj-bind-for-each: abandoned promise"))}}([],this.onArrayChange,this),function(e){r(),t(e),this.resetChainIfCompleted(n)}.bind(this))}.bind(this))).catch((function(e){if("oj-bind-for-each: abandoned promise"!==e.message){if(e instanceof Error)throw e._CAUGHT_PROMISE_REJECTION=!0,e;throw new Error(e)}})),this.headDataPromise=n,this.tailDataPromise=n},c.prototype.getIndexesForEvent=function(e,t){var n,r=[];if(Array.isArray(e))for(n=0;n<e.length;n++)r.push(e[n]);else if(t){var o=Array.isArray(t)?t.length:t.size,a=new i(t),s=new Map,u=0;for(n=0;n<this.firstLastNodesList.length&&u<o;n++){var l=this.firstLastNodesList[n].key,d=a.get(l);d!==a.NOT_A_KEY&&(s.set(d,n),u+=1)}t.forEach((function(e){r.push(s.get(e))}))}return r},c.prototype.handleDataMutateEvent=function(e){var t,n,r={},i=this;this.tailDataPromise?(t=this.registerBusyState(),(n=this.tailDataPromise.then((function(){return t(),i.getDataMutationHelper(e,r)}))).catch((function(e){i.promiseRejectHelper(e,t,n)}))):(n=this.getDataMutationHelper(e,r),this.headDataPromise=n),this.tailDataPromise=n,r.head=this.headDataPromise,r.current=n},c.prototype.getDataMutationHelper=function(e,t){var n,r,i=this,s=e.detail.add,u=e.detail.remove,l=e.detail.update,d=s&&s.data,c=l&&l.data,p=function(){if(c){var e=0,t=[],n=i.getIndexesForEvent(l.indexes,l.keys);l.keys.forEach((function(r){if(void 0!==n[e]){var i=c[e];t.push(a(n[e])),t.push(o(i,n[e],r))}e+=1})),i.onArrayChange(t)}},f=function(){if(u){var e=i.getIndexesForEvent(u.indexes,u.keys);e=e.filter((function(e){return void 0!==e})),i.onArrayChange(e.map(a))}},h=function(){if(d){var e=i.getIndexesForEvent(s.indexes,s.addBeforeKeys?s.addBeforeKeys:s.afterKeys),t=[],n=0;s.keys.forEach((function(r){var i=d[n];t.push(o(i,function(t){var n=e.length>t?e[t]:this.firstLastNodesList.length+t;return void 0===n?this.firstLastNodesList.length:n}(n),r)),n+=1}),i),i.onArrayChange(t)}};if(l&&!Array.isArray(c)||s&&!Array.isArray(d)){var m=l&&!Array.isArray(c)?this.currentDataProvider.fetchByKeys({keys:l.keys}):Promise.resolve(),g=s&&!Array.isArray(d)?this.currentDataProvider.fetchByKeys({keys:s.keys}):Promise.resolve();n=this.registerBusyState(),(r=Promise.all([m,g]).then((function(e){if(t.head!==i.headDataPromise)throw n(),new Error("oj-bind-for-each: abandoned promise");var r=e[0];r&&r.results.size>0&&(c=T(l.keys).map((function(e){return r.results.get(e).data}))),p(),f();var o=e[1];o&&o.results.size>0&&(d=T(s.keys).map((function(e){return o.results.get(e).data}))),h(),n(),i.resetChainIfCompleted(t.current)}))).catch((function(e){i.promiseRejectHelper(e,n,t.current)}))}else p(),f(),h();return r},c.prototype.handleDataRefreshEvent=function(){this.recreateContent(this.currentDataProvider)},c.prototype.onArrayChange=function(e){for(var t={added:[],deleted:[]},n=0,r=e.length;n<r;n++)if(t.added.length&&"added"===e[n].status){var i=t.added[t.added.length-1];(i.isBatch?i.index+i.values.length-1:i.index)+1===e[n].index?(i.isBatch||(i={isBatch:!0,status:"added",index:i.index,values:[i.value],keys:[i.key]},t.added.splice(t.added.length-1,1,i)),i.values.push(e[n].value),i.keys.push(e[n].key)):t[e[n].status].push(e[n])}else t[e[n].status].push(e[n]);t.deleted.length>0&&(this.changeQueue.push.apply(this.changeQueue,t.deleted),this.changeQueue.push({status:"clearDeletedIndexes"})),this.changeQueue.push.apply(this.changeQueue,t.added),this.changeQueue.length>0&&!this.rendering_queued&&(this.rendering_queued=!0,this.processQueue()),this._resolveChildrenBindingsAppliedPromise()},c.prototype.processQueue=function(){var e=this,t=9007199254740991;r.utils.arrayForEach(this.changeQueue,(function(n){"number"==typeof n.index&&(t=Math.min(t,n.index)),e[n.status](n)})),this.flushPendingDeletes(),this.rendering_queued=!1,this.updateIndexes(t),this.changeQueue=[]},c.prototype.added=function(e){for(var t=e.index,n=e.isBatch?e.values:[e.value],i=e.isBatch?e.keys:[e.key],o=this.getLastNodeBeforeIndex(t),a=[],s=0,u=n.length;s<u;++s){var d,c,p=this.getPendingDeleteFor(n[s]);p&&p.nodesets.length?(d=p.nodesets.pop(),c=p.currentChildContext):(c={data:n[s],index:t+s,observableIndex:r.observable()},Object.defineProperties(c,{_nearestCustomParent:{value:this.trackingContext._nearestCustomParent,enumerable:!1},_immediate:{value:this.trackingContext._immediate,enumerable:!1}}),d=l.execute(this.element,this.element._templateNode,c,this.as)),a.push.apply(a,Array.prototype.slice.call(d)),this.firstLastNodesList.splice(t+s,0,{first:d[0],last:d[d.length-1],key:i?i[s]:null,currentChildContext:c})}this.insertAllAfter(a,o)},c.prototype.getNodesForIndex=function(e){var t=[],n=this.firstLastNodesList[e].first,r=this.firstLastNodesList[e].last;for(t.push(n);n&&n!==r;)n=n.nextSibling,t.push(n);return t},c.prototype.getLastNodeBeforeIndex=function(e){return e<1||e-1>=this.firstLastNodesList.length?null:this.firstLastNodesList[e-1].last},c.prototype.insertAllAfter=function(e,n){var i,o,a=this.element;if(1===e.length)r.virtualElements.insertAfter(a,e[0],n);else if(t){var s=document.createDocumentFragment();for(o=0,i=e.length;o!==i;++o)s.appendChild(e[o]);r.virtualElements.insertAfter(a,s,n)}else for(o=e.length-1;o>=0;--o){var u=e[o];if(!u)break;r.virtualElements.insertAfter(a,u,n)}return e},c.prototype.shouldDelayDeletion=function(e){return e&&("object"===d(e)||"function"==typeof e)},c.prototype.getPendingDeleteFor=function(e){var t=e&&e._ko_ffe_pending_delete_index;return void 0===t?null:this.pendingDeletes[t]},c.prototype.getOrCreatePendingDeleteFor=function(e){var t=this.getPendingDeleteFor(e);return t||(t={data:e,nodesets:[]},e._ko_ffe_pending_delete_index=this.pendingDeletes.length,this.pendingDeletes.push(t),t)},c.prototype.deleted=function(e){if(this.shouldDelayDeletion(e.value)){var t=this.getOrCreatePendingDeleteFor(e.value);t.nodesets.push(this.getNodesForIndex(e.index)),t.currentChildContext=this.firstLastNodesList[e.index].currentChildContext}else this.removeNodes(this.getNodesForIndex(e.index));this.indexesToDelete.push(e.index)},c.prototype.removeNodes=function(e){if(e.length){!function(){for(var t=e[0].parentNode,n=e.length-1;n>=0;--n)l.clean(e[n]),t.removeChild(e[n])}()}},c.prototype.flushPendingDeletes=function(){for(var e=0,t=this.pendingDeletes.length;e!==t;++e){for(var n=this.pendingDeletes[e];n.nodesets.length;)this.removeNodes(n.nodesets.pop());n.data&&void 0!==n.data._ko_ffe_pending_delete_index&&delete n.data._ko_ffe_pending_delete_index}this.pendingDeletes=[]},c.prototype.clearDeletedIndexes=function(){for(var e=this.indexesToDelete.length-1;e>=0;--e)this.firstLastNodesList.splice(this.indexesToDelete[e],1);this.indexesToDelete=[]},c.prototype.updateIndexes=function(e){for(var t=e,n=this.firstLastNodesList.length;t<n;++t){var r=this.firstLastNodesList[t].currentChildContext;r&&r.observableIndex&&r.observableIndex(t)}},c.prototype.getData=function(){return{data:this.data,dataProvider:this.currentDataProvider}},c.prototype.setData=function(e){this.removeSubscriptions(),this.data=e.data,this.currentDataProvider=e.dataProvider,this.addSubscriptions()},r.bindingHandlers._ojBindForEach_={init:function(e,t,n,i,o){var a,s;return r.computed((function(){if(s=t(),a){var e,n,i=s.data,o=a.getData().data;if(r.ignoreDependencies((function(){e=r.unwrap(o),n=r.unwrap(i)})),a.setData({data:i,dataProvider:n.fetchFirst?n:null}),Array.isArray(e)&&Array.isArray(n)){var u=r.utils.compareArrays(e,n,{sparse:!0,dontLimitMoves:!0});a.onArrayChange(u)}else a.recreateContent(n)}}),null,{disposeWhenNodeIsRemoved:e}),a=new c(e,s,o),r.utils.domNodeDisposal.addDisposeCallback(e,(function(){a.removeSubscriptions()})),{controlsDescendantBindings:!0}}},r.virtualElements.allowedBindings._ojBindForEach_=!0}(),e.koStringTemplateEngine={},e.koStringTemplateEngine.install=function(){if(!r.templates){var e={},t={},n=new r.nativeTemplateEngine,i=function(n){this._templateName=n,this.text=function(t){if(!t)return e[this._templateName];e[this._templateName]=t},this.data=function(e,n){if(t[this._templateName]||(t[this._templateName]={}),1===arguments.length)return t[this._templateName][e];t[this._templateName][e]=n}};n.makeTemplateSource=function(e,t){if("string"==typeof e){var n=(t=t||document).getElementById(e);return n?new r.templateSources.domElement(n):new i(e)}if(e&&1===e.nodeType||8===e.nodeType)return new r.templateSources.anonymousTemplate(e)},r.templates=e,r.setTemplateEngine(n)}},e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["item"],init:function(e,t,n,r,i,o,a){var s=w(e,t,a);if(null!=s)return s},update:function(e,t,n,r,i,o,a){return w(e,t,a)},for:"ojListViewRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojListView",use:"ojListViewRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"ojNavigationList",use:"ojListViewRenderer"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["center"],init:function(e,t,n,r,i,o,a){return O(e,t,a)},update:function(e,t,n,r,i,o,a){return O(e,t,a)},for:"ojStatusMeterGauge"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["rootNodeContent"],init:function(e,t,n,r,i,o,a){return k(e,t,a)},update:function(e,t,n,r,i,o,a){return k(e,t,a)},for:"ojSunburst"});function L(e,n,i){var o,a;return o=i,a=n,function(n){var i=null,s=null;if("header"===a)i=e.createChildContext(null,null,(function(e){e.$columnIndex=n.columnIndex,e.$headerContext=n.headerContext,e.$data=n.data})),s=n.headerContext.parentElement;else if("cell"===a){var u=n.row;i=e.createChildContext(u,null,(function(e){e.$columnIndex=n.columnIndex,e.$cellContext=n.cellContext})),s=n.cellContext.parentElement}"footer"===a&&(i=e.createChildContext(null,null,(function(e){e.$columnIndex=n.columnIndex,e.$footerContext=n.footerContext})),s=n.footerContext.parentElement),r.renderTemplate(o,i,{afterRender:function(e){t(e)._ojDetectCleanData()}},s,"replaceNode")}}function S(e,n){return function(i){var o=i.row,a=e.createChildContext(o,null,(function(e){e.$rowContext=i.rowContext}));r.renderTemplate(n,a,{afterRender:function(e){t(e)._ojDetectCleanData()}},i.rowContext.parentElement,"replaceNode")}}function M(e,t,n){var r,i;if("areaLayers"===e){for(r=0;r<t.length;r++){var o=t[r].areaDataLayer;o&&null!=(i=o.template)&&(o._templateRenderer=P(n,i))}return{areaLayers:t}}if("pointDataLayers"===e){for(r=0;r<t.length;r++)null!=(i=t[r].template)&&(t[r]._templateRenderer=P(n,i));return{pointDataLayers:t}}return null}function R(e,t,n){return"nodeContent"===e&&t.template&&(t._renderer=N(n,t.template)),{nodeContent:t}}e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["columns","columnsDefault","rowTemplate"],init:function(e,t,n,r,i,o,a){if("columns"===e||"columnsDefault"===e){for(var s=0;s<t.length;s++){var u=t[s],l=u.template,d=u.footerTemplate,c=u.headerTemplate;null!=l&&(u.renderer=L(a,"cell",l)),null!=d&&(u.footerRenderer=L(a,"footer",d)),null!=c&&(u.headerRenderer=L(a,"header",c))}return"columns"===e?{columns:t}:{columnsDefault:t}}if("rowTemplate"===e)return{rowRenderer:S(a,t)}},update:function(e,t,n,r,i,o,a){if("columns"===e||"columnsDefault"===e){for(var s=0;s<t.length;s++){var u=t[s],l=u.template,d=u.footerTemplate,c=u.headerTemplate;null!=l&&(u.renderer=L(a,"cell",l)),null!=d&&(u.footerRenderer=L(a,"footer",d)),null!=c&&(u.headerRenderer=L(a,"header",c))}r("columns"===e?{columns:t}:{columnsDefault:t})}else if("rowTemplate"===e)return{rowRenderer:S(a,t)};return null},for:"ojTable"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["areaLayers","pointDataLayers"],init:function(e,t,n,r,i,o,a){return M(e,t,a)},update:function(e,t,n,r,i,o,a){return M(e,t,a)},for:"ojThematicMap"}),e.ComponentBinding.getDefaultInstance().setupManagedAttributes({attributes:["nodeContent"],init:function(e,t,n,r,i,o,a){return R(e,t,a)},update:function(e,t,n,r,i,o,a){return R(e,t,a)},for:"ojTreemap"})}));