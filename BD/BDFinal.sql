-- MySQL Script generated by MySQL Workbench
-- Mon Jan 11 19:12:38 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`PlantelEducativo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PlantelEducativo` (
  `clave` VARCHAR(100) NOT NULL,
  `sector` VARCHAR(100) NOT NULL,
  `nivelEscolar` VARCHAR(100) NOT NULL,
  `zona` VARCHAR(100) NOT NULL,
  `direccion` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`clave`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Cuenta`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Cuenta` (
  `nombreUsuario` VARCHAR(100) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `contrasena` VARCHAR(200) NOT NULL,
  `PlantelEducativo_clave` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`nombreUsuario`),
  INDEX `fk_Cuenta_PlantelEducativo1_idx` (`PlantelEducativo_clave` ASC) VISIBLE,
  CONSTRAINT `fk_Cuenta_PlantelEducativo1`
    FOREIGN KEY (`PlantelEducativo_clave`)
    REFERENCES `mydb`.`PlantelEducativo` (`clave`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Genero`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Genero` (
  `idGenero` INT NOT NULL,
  `genero` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idGenero`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Docente`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Docente` (
  `idDocente` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(100) NOT NULL,
  `apellidoPaterno` VARCHAR(100) NOT NULL,
  `apellidoMaterno` VARCHAR(100) NOT NULL,
  `gradoAcademico` VARCHAR(45) NOT NULL,
  `telefono` VARCHAR(20) NOT NULL,
  `Genero_idGenero` INT NOT NULL,
  `Cuenta_nombreUsuario` VARCHAR(100) NOT NULL,
  `PlantelEducativo_clave` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`idDocente`),
  INDEX `fk_Docente_Genero1_idx` (`Genero_idGenero` ASC) VISIBLE,
  INDEX `fk_Docente_Cuenta1_idx` (`Cuenta_nombreUsuario` ASC) VISIBLE,
  INDEX `fk_Docente_PlantelEducativo1_idx` (`PlantelEducativo_clave` ASC) VISIBLE,
  CONSTRAINT `fk_Docente_Genero1`
    FOREIGN KEY (`Genero_idGenero`)
    REFERENCES `mydb`.`Genero` (`idGenero`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Docente_Cuenta1`
    FOREIGN KEY (`Cuenta_nombreUsuario`)
    REFERENCES `mydb`.`Cuenta` (`nombreUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Docente_PlantelEducativo1`
    FOREIGN KEY (`PlantelEducativo_clave`)
    REFERENCES `mydb`.`PlantelEducativo` (`clave`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Alumno`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Alumno` (
  `idAlumno` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `apellidoPaterno` VARCHAR(45) NOT NULL,
  `apellidoMaterno` VARCHAR(45) NOT NULL,
  `Genero_idGenero` INT NOT NULL,
  `Cuenta_nombreUsuario` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`idAlumno`),
  INDEX `fk_Alumno_Genero1_idx` (`Genero_idGenero` ASC) VISIBLE,
  INDEX `fk_Alumno_Cuenta1_idx` (`Cuenta_nombreUsuario` ASC) VISIBLE,
  CONSTRAINT `fk_Alumno_Genero1`
    FOREIGN KEY (`Genero_idGenero`)
    REFERENCES `mydb`.`Genero` (`idGenero`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Alumno_Cuenta1`
    FOREIGN KEY (`Cuenta_nombreUsuario`)
    REFERENCES `mydb`.`Cuenta` (`nombreUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CicloEscolar`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CicloEscolar` (
  `idCicloEscolar` INT NOT NULL AUTO_INCREMENT,
  `fechaInicio` DATE NOT NULL,
  `fechaFinal` DATE NOT NULL,
  PRIMARY KEY (`idCicloEscolar`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Foro`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Foro` (
  `idForo` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idForo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Grupo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Grupo` (
  `idGrupo` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `CicloEscolar_idCicloEscolar` INT NOT NULL,
  `Foro_idForo` INT NOT NULL,
  `Docente_idDocente` INT NOT NULL,
  PRIMARY KEY (`idGrupo`),
  INDEX `fk_Grupo_CicloEscolar1_idx` (`CicloEscolar_idCicloEscolar` ASC) VISIBLE,
  INDEX `fk_Grupo_Foro1_idx` (`Foro_idForo` ASC) VISIBLE,
  INDEX `fk_Grupo_Docente1_idx` (`Docente_idDocente` ASC) VISIBLE,
  CONSTRAINT `fk_Grupo_CicloEscolar1`
    FOREIGN KEY (`CicloEscolar_idCicloEscolar`)
    REFERENCES `mydb`.`CicloEscolar` (`idCicloEscolar`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Grupo_Foro1`
    FOREIGN KEY (`Foro_idForo`)
    REFERENCES `mydb`.`Foro` (`idForo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Grupo_Docente1`
    FOREIGN KEY (`Docente_idDocente`)
    REFERENCES `mydb`.`Docente` (`idDocente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`GradoAcademico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`GradoAcademico` (
  `idGradoAcademico` INT NOT NULL AUTO_INCREMENT,
  `gradoAcademico` VARCHAR(45) NOT NULL,
  `nivel` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idGradoAcademico`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Materia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Materia` (
  `idMateria` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(100) NOT NULL,
  `descripcion` VARCHAR(200) NOT NULL,
  `GradoAcademico_idGradoAcademico` INT NOT NULL,
  PRIMARY KEY (`idMateria`),
  INDEX `fk_Materia_GradoAcademico1_idx` (`GradoAcademico_idGradoAcademico` ASC) VISIBLE,
  CONSTRAINT `fk_Materia_GradoAcademico1`
    FOREIGN KEY (`GradoAcademico_idGradoAcademico`)
    REFERENCES `mydb`.`GradoAcademico` (`idGradoAcademico`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Actividad`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Actividad` (
  `idActividad` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(50) NOT NULL,
  `descripcion` VARCHAR(100) NOT NULL,
  `fechaCreada` DATE NOT NULL,
  `fechaEntrega` DATE NOT NULL,
  `Grupo_idGrupo` INT NOT NULL,
  PRIMARY KEY (`idActividad`),
  INDEX `fk_Actividad_Grupo1_idx` (`Grupo_idGrupo` ASC) VISIBLE,
  CONSTRAINT `fk_Actividad_Grupo1`
    FOREIGN KEY (`Grupo_idGrupo`)
    REFERENCES `mydb`.`Grupo` (`idGrupo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Bitacora`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Bitacora` (
  `idBitacora` INT NOT NULL AUTO_INCREMENT,
  `fecha` DATE NOT NULL,
  `archivo` LONGBLOB NOT NULL,
  `Docente_idDocente` INT NOT NULL,
  PRIMARY KEY (`idBitacora`),
  INDEX `fk_Bitacora_Docente1_idx` (`Docente_idDocente` ASC) VISIBLE,
  CONSTRAINT `fk_Bitacora_Docente1`
    FOREIGN KEY (`Docente_idDocente`)
    REFERENCES `mydb`.`Docente` (`idDocente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Materia_has_Grupo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Materia_has_Grupo` (
  `Materia_idMateria` INT NOT NULL,
  `Grupo_idGrupo` INT NOT NULL,
  PRIMARY KEY (`Materia_idMateria`, `Grupo_idGrupo`),
  INDEX `fk_Materia_has_Grupo_Grupo1_idx` (`Grupo_idGrupo` ASC) VISIBLE,
  INDEX `fk_Materia_has_Grupo_Materia1_idx` (`Materia_idMateria` ASC) VISIBLE,
  CONSTRAINT `fk_Materia_has_Grupo_Materia1`
    FOREIGN KEY (`Materia_idMateria`)
    REFERENCES `mydb`.`Materia` (`idMateria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Materia_has_Grupo_Grupo1`
    FOREIGN KEY (`Grupo_idGrupo`)
    REFERENCES `mydb`.`Grupo` (`idGrupo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Bloque`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Bloque` (
  `idBloque` INT NOT NULL AUTO_INCREMENT,
  `fechaInicio` DATE NOT NULL,
  `fechaFinal` DATE NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `propositos` VARCHAR(200) NOT NULL,
  `Grupo_idGrupo` INT NOT NULL,
  PRIMARY KEY (`idBloque`),
  INDEX `fk_Bloque_Grupo1_idx` (`Grupo_idGrupo` ASC) VISIBLE,
  CONSTRAINT `fk_Bloque_Grupo1`
    FOREIGN KEY (`Grupo_idGrupo`)
    REFERENCES `mydb`.`Grupo` (`idGrupo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Mensaje`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Mensaje` (
  `idMensaje` INT NOT NULL AUTO_INCREMENT,
  `mensaje` VARCHAR(200) NOT NULL,
  `Foro_idForo` INT NOT NULL,
  `Cuenta_nombreUsuario` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`idMensaje`),
  INDEX `fk_Mensaje_Foro1_idx` (`Foro_idForo` ASC) VISIBLE,
  INDEX `fk_Mensaje_Cuenta1_idx` (`Cuenta_nombreUsuario` ASC) VISIBLE,
  CONSTRAINT `fk_Mensaje_Foro1`
    FOREIGN KEY (`Foro_idForo`)
    REFERENCES `mydb`.`Foro` (`idForo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Mensaje_Cuenta1`
    FOREIGN KEY (`Cuenta_nombreUsuario`)
    REFERENCES `mydb`.`Cuenta` (`nombreUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Archivo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Archivo` (
  `idArchivo` INT NOT NULL AUTO_INCREMENT,
  `archivo` LONGBLOB NOT NULL,
  `Actividad_idActividad` INT NOT NULL,
  PRIMARY KEY (`idArchivo`),
  INDEX `fk_Archivo_Actividad1_idx` (`Actividad_idActividad` ASC) VISIBLE,
  CONSTRAINT `fk_Archivo_Actividad1`
    FOREIGN KEY (`Actividad_idActividad`)
    REFERENCES `mydb`.`Actividad` (`idActividad`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Alumno_has_Bloque`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Alumno_has_Bloque` (
  `Alumno_idAlumno` INT NOT NULL,
  `Bloque_idBloque` INT NOT NULL,
  PRIMARY KEY (`Alumno_idAlumno`, `Bloque_idBloque`),
  INDEX `fk_Alumno_has_Bloque_Bloque1_idx` (`Bloque_idBloque` ASC) VISIBLE,
  INDEX `fk_Alumno_has_Bloque_Alumno1_idx` (`Alumno_idAlumno` ASC) VISIBLE,
  CONSTRAINT `fk_Alumno_has_Bloque_Alumno1`
    FOREIGN KEY (`Alumno_idAlumno`)
    REFERENCES `mydb`.`Alumno` (`idAlumno`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Alumno_has_Bloque_Bloque1`
    FOREIGN KEY (`Bloque_idBloque`)
    REFERENCES `mydb`.`Bloque` (`idBloque`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ActividadEntrega`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ActividadEntrega` (
  `idActividadEntrega` INT NOT NULL AUTO_INCREMENT,
  `archivo` LONGBLOB NOT NULL,
  `nombre` VARCHAR(100) NOT NULL,
  `Actividad_idActividad` INT NOT NULL,
  `Alumno_idAlumno` INT NOT NULL,
  `calificacion` INT NULL,
  PRIMARY KEY (`idActividadEntrega`),
  INDEX `fk_ActividadEntrega_Actividad1_idx` (`Actividad_idActividad` ASC) VISIBLE,
  INDEX `fk_ActividadEntrega_Alumno1_idx` (`Alumno_idAlumno` ASC) VISIBLE,
  CONSTRAINT `fk_ActividadEntrega_Actividad1`
    FOREIGN KEY (`Actividad_idActividad`)
    REFERENCES `mydb`.`Actividad` (`idActividad`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ActividadEntrega_Alumno1`
    FOREIGN KEY (`Alumno_idAlumno`)
    REFERENCES `mydb`.`Alumno` (`idAlumno`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Alumno_has_Grupo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Alumno_has_Grupo` (
  `Alumno_idAlumno` INT NOT NULL,
  `Grupo_idGrupo` INT NOT NULL,
  `calificacion` INT NULL,
  PRIMARY KEY (`Alumno_idAlumno`, `Grupo_idGrupo`),
  INDEX `fk_Alumno_has_Grupo_Grupo1_idx` (`Grupo_idGrupo` ASC) VISIBLE,
  INDEX `fk_Alumno_has_Grupo_Alumno1_idx` (`Alumno_idAlumno` ASC) VISIBLE,
  CONSTRAINT `fk_Alumno_has_Grupo_Alumno1`
    FOREIGN KEY (`Alumno_idAlumno`)
    REFERENCES `mydb`.`Alumno` (`idAlumno`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Alumno_has_Grupo_Grupo1`
    FOREIGN KEY (`Grupo_idGrupo`)
    REFERENCES `mydb`.`Grupo` (`idGrupo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Docente_has_Materia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Docente_has_Materia` (
  `Docente_idDocente` INT NOT NULL,
  `Materia_idMateria` INT NOT NULL,
  PRIMARY KEY (`Docente_idDocente`, `Materia_idMateria`),
  INDEX `fk_Docente_has_Materia_Materia1_idx` (`Materia_idMateria` ASC) VISIBLE,
  INDEX `fk_Docente_has_Materia_Docente1_idx` (`Docente_idDocente` ASC) VISIBLE,
  CONSTRAINT `fk_Docente_has_Materia_Docente1`
    FOREIGN KEY (`Docente_idDocente`)
    REFERENCES `mydb`.`Docente` (`idDocente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Docente_has_Materia_Materia1`
    FOREIGN KEY (`Materia_idMateria`)
    REFERENCES `mydb`.`Materia` (`idMateria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
